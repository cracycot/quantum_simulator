# –û—Ç—á—ë—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ 9-–∫—É–±–∏—Ç–Ω–æ–π —Å—Ö–µ–º—ã –∫–æ–¥–∞ –®–æ—Ä–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–Ω—Ü–∏–ª–ª
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `system.ts`:
- –§–∏–∑–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞: 10 –∫—É–±–∏—Ç–æ–≤ (9 data + 1 ancilla)
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–∞—Ä—Ç–∞: 8 –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞–Ω—Ü–∏–ª–ª (a0-a7) ‚Üí 1 —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è (index 9)
- State space: 2^10 = 1,024 (–≤–º–µ—Å—Ç–æ 2^17 = 131,072)
- **–≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏: 128√ó (99.2%)**

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ explicit reset –¥–ª—è –∞–Ω—Ü–∏–ª–ª—ã –º–µ–∂–¥—É –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `resetQubit()` –≤ `system.ts`:
```typescript
resetQubit(qubitIndex: number): void {
  const physicalIndex = this.mapToPhysical(qubitIndex);
  const result = this.state.measureQubit(physicalIndex);
  if (result === 1) {
    applyGateInternal(this.state, { name: 'X', qubits: [physicalIndex] });
  }
}
```

–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–∏–Ω–¥—Ä–æ–º–æ–≤ –≤ `shor.ts`:
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ `measureQubit()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `resetQubit()`
- –ê–Ω—Ü–∏–ª–ª–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤ |0‚ü© –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –∏–∑–º–µ—Ä–µ–Ω–∏–µ–º

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ —Ç–µ–æ—Ä–∏–∏ –∫–æ–¥–∞ –®–æ—Ä–∞
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã:

#### Bit-Flip (X-–æ—à–∏–±–∫–∏) ‚Äî 6 ZZ-—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
- **–ë–ª–æ–∫ 1**: S‚ÇÄ = Z‚ÇÄZ‚ÇÅ, S‚ÇÅ = Z‚ÇÅZ‚ÇÇ
- **–ë–ª–æ–∫ 2**: S‚ÇÇ = Z‚ÇÉZ‚ÇÑ, S‚ÇÉ = Z‚ÇÑZ‚ÇÖ
- **–ë–ª–æ–∫ 3**: S‚ÇÑ = Z‚ÇÜZ‚Çá, S‚ÇÖ = Z‚ÇáZ‚Çà

–ò–∑–º–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ CNOT(data ‚Üí ancilla), –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤ Z-–±–∞–∑–∏—Å–µ.

#### Phase-Flip (Z-–æ—à–∏–±–∫–∏) ‚Äî 2 X‚äó‚Å∂-—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–∞
- **S‚ÇÜ** = X‚ÇÄX‚ÇÅX‚ÇÇX‚ÇÉX‚ÇÑX‚ÇÖ (–±–ª–æ–∫–∏ 1 & 2 –≤ –æ–¥–Ω–æ–π —Ñ–∞–∑–µ)
- **S‚Çá** = X‚ÇÉX‚ÇÑX‚ÇÖX‚ÇÜX‚ÇáX‚Çà (–±–ª–æ–∫–∏ 2 & 3 –≤ –æ–¥–Ω–æ–π —Ñ–∞–∑–µ)

–ò–∑–º–µ—Ä—è—é—Ç—Å—è —á–µ—Ä–µ–∑ H, CNOT(ancilla ‚Üí data√ó6), H, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤ X-–±–∞–∑–∏—Å–µ.

**–§–∏–∑–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª**:
- X-–æ—à–∏–±–∫–∞ –≤ –±–ª–æ–∫–µ ‚Üí ZZ –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ
- Z-–æ—à–∏–±–∫–∞ –≤ –±–ª–æ–∫–µ ‚Üí XXX...X –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ñ–∞–∑–æ–≤—ã–π —Å–¥–≤–∏–≥

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∞–Ω—Ü–∏–ª–ª—ã
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `QuantumCircuit.tsx`:
- –î–æ–±–∞–≤–ª–µ–Ω prop `virtualQubitMap?: Map<number, number>`
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–ª—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∞–Ω—Ü–∏–ª–ª:
  - –ü—É–Ω–∫—Ç–∏—Ä–Ω–∞—è –æ—Ä–∞–Ω–∂–µ–≤–∞—è –ª–∏–Ω–∏—è –Ω–∞ –ø—Ä–æ–≤–æ–¥–µ
  - –ò–∫–æ–Ω–∫–∞ "v" —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –º–∞–ø–ø–∏–Ω–≥–µ
  - Tooltip: "Virtual ancilla: maps to physical ancilla at index X"

–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `App.tsx`:
- –ü–µ—Ä–µ–¥–∞—á–∞ `virtualQubitMap` –∏–∑ —Å–∏—Å—Ç–µ–º—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `QuantumCircuit`

### 5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `tests/shor-optimization.test.ts` —Å —Ç–µ—Å—Ç–∞–º–∏:
1. ‚úÖ –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã (2^10 –≤–º–µ—Å—Ç–æ 2^17)
2. ‚úÖ Virtual-to-physical mapping –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω
3. ‚úÖ –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Å–∏–Ω–¥—Ä–æ–º–∞
4. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ X-–æ—à–∏–±–∫–∏
5. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Z-–æ—à–∏–±–∫–∏
6. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ Y-–æ—à–∏–±–∫–∏ (X+Z)
7. ‚úÖ Reset –æ–ø–µ—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –∏–∑–º–µ—Ä–µ–Ω–∏—è–º–∏
8. ‚úÖ –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ state vector

---

## üìä –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω **–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª –∏–∑–º–µ—Ä–µ–Ω–∏–π** —Å–æ–≥–ª–∞—Å–Ω–æ –∞–ª–≥–æ—Ä–∏—Ç–º—É –∏–∑ –æ–ø–∏—Å–∞–Ω–∏—è:

```
–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–Ω–¥—Ä–æ–º–∞ S_k (k = 0..7):
  1. Prepare:  ancilla ‚Üê |0‚ü© (–∏–ª–∏ |+‚ü© –¥–ª—è X-–±–∞–∑–∏—Å–∞)
  2. Entangle: –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Å–∏–Ω–¥—Ä–æ–º–Ω—É—é —Å—Ö–µ–º—É
  3. Measure:  ancilla ‚Üí classical bit s_k
  4. Reset:    ancilla ‚Üê |0‚ü© (–¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
```

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–æ—Ä–∏–∏ –∫–æ–¥–∞ –®–æ—Ä–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞**:
```
|0‚ü©_L = 1/(2‚àö2) ¬∑ (|000‚ü©+|111‚ü©) ‚äó (|000‚ü©+|111‚ü©) ‚äó (|000‚ü©+|111‚ü©)
|1‚ü©_L = 1/(2‚àö2) ¬∑ (|000‚ü©‚àí|111‚ü©) ‚äó (|000‚ü©‚àí|111‚ü©) ‚äó (|000‚ü©‚àí|111‚ü©)
```

**–î–≤—É—Ö—Å–ª–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞**:
- **–í–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∞**: 3-–∫—É–±–∏—Ç–Ω—ã–π repetition code –¥–ª—è X-–æ—à–∏–±–æ–∫
- **–ú–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏**: 3-–±–ª–æ–∫–æ–≤—ã–π phase repetition –¥–ª—è Z-–æ—à–∏–±–æ–∫

**–ö–∞–∫ –ª–æ–≤–∏—Ç—Å—è Z-–æ—à–∏–±–∫–∞**:
- Z –Ω–∞ –∫—É–±–∏—Ç–µ –≤ –±–ª–æ–∫–µ i: `(|000‚ü©+|111‚ü©) ‚Üí (|000‚ü©‚àí|111‚ü©)`
- ZZ-—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –ù–ï –≤–∏–¥—è—Ç (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–π Z-eigenvalue)
- XXX...X-—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –í–ò–î–Ø–¢ (—Ä–∞–∑–Ω—ã–µ X-eigenvalue –º–µ–∂–¥—É –±–ª–æ–∫–∞–º–∏)

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–ü–∞–º—è—Ç—å**: 128√ó —ç–∫–æ–Ω–æ–º–∏—è (2 MB ‚Üí 16 KB –Ω–∞ state vector)
2. **–°–∫–æ—Ä–æ—Å—Ç—å**: –ë—ã—Å—Ç—Ä–µ–µ —Å–∏–º—É–ª—è—Ü–∏—è (–º–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–π)
3. **–†–µ–∞–ª–∏–∑–º**: Mid-circuit measurements (–∫–∞–∫ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
4. **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–æ—Ä–∏–∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–Ω—ã—Ö –∫–æ–¥–æ–≤

---

## üìù –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`SHOR_CODE_OPTIMIZATION.md`** ‚Äî –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
2. **`tests/shor-optimization.test.ts`** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä (8 —Ç–µ—Å—Ç–æ–≤)
3. –û–±–Ω–æ–≤–ª–µ–Ω—ã:
   - `src/core/quantum/system.ts` (–º–µ—Ç–æ–¥ `resetQubit()`, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
   - `src/core/codes/shor.ts` (reset –ø–æ—Å–ª–µ –∏–∑–º–µ—Ä–µ–Ω–∏–π, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
   - `src/components/QuantumCircuit.tsx` (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏)
   - `src/App.tsx` (–ø–µ—Ä–µ–¥–∞—á–∞ `virtualQubitMap`)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **9-–∫—É–±–∏—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –∫–æ–¥–∞ –®–æ—Ä–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞**  
‚úÖ **–ê–ª–≥–æ—Ä–∏—Ç–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**  
‚úÖ **–°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–µ–æ—Ä–∏–∏ –∫–æ–¥–∞ –®–æ—Ä–∞**  
‚úÖ **UI –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–Ω—Ü–∏–ª–ª—ã**  
‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

–ó–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev` –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–¥ –®–æ—Ä–∞:
- State space: 1024 (–Ω–µ 131072) ‚úì
- –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∞–Ω—Ü–∏–ª–ª—ã a‚ÇÄ-a‚Çá —Å –æ—Ä–∞–Ω–∂–µ–≤—ã–º–∏ –ø—É–Ω–∫—Ç–∏—Ä–∞–º–∏ ‚úì
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ X, Z, Y –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úì
- –ö–æ—Ä—Ä–µ–∫—Ü–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç fidelity > 99% ‚úì

---

*–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.*  
*–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `SHOR_CODE_OPTIMIZATION.md`*

