# 🧪 Инструкция по запуску теста Gate Errors

## Команда для запуска:

```bash
npx tsx tests/simple-gate-error-test.ts
```

## Что должно получиться (ожидаемые результаты):

### ✅ ТЕСТ 1: 3-кубитный код с p=50%

**Ожидается:**
- Всего операций: примерно 10-15
- Gate errors обнаружено: **1-3** (при вероятности 50%)
- Обычных гейтов: 3 (два CNOT для кодирования + один X для коррекции)

**Детали:**
```
Детали gate errors:
  1. X на q0 после гейта CNOT
  2. X на q1 после гейта CNOT
  (может быть больше или меньше из-за случайности)
```

**Статус:** ✅ ПРОЙДЕН (если gate errors > 0)

---

### ✅ ТЕСТ 2: Код Шора с p=30%

**Ожидается:**
- Всего операций: примерно 20-40
- Gate errors обнаружено: **2-8** (при вероятности 30%)
- Обычных гейтов: 0 (все гейты внутри applyGatesWithDescription)

**Детали:**
```
Детали gate errors (первые 5):
  1. X на q3 после гейта CNOT
  2. Z на q0 после гейта H
  3. Y на q6 после гейта CNOT
  (типы ошибок X/Y/Z случайные из-за depolarizing)

Статистика типов ошибок:
  X: 2
  Y: 1
  Z: 1
```

**Статус:** ✅ ПРОЙДЕН (если gate errors > 0)

---

### ✅ ТЕСТ 3: Статистика за 10 прогонов (p=20%)

**Ожидается:**
- Всего операций: примерно 100-150
- Всего gate errors: примерно **20-30**
- Средняя частота ошибок: **15-25%**

**Статус:** ✅ ПРОЙДЕН (если частота в диапазоне 15-25%)

---

## Итоговый результат:

```
═══════════════════════════════════════════════════════════════
📋 ИТОГОВЫЙ ОТЧЁТ
═══════════════════════════════════════════════════════════════

ТЕСТ 1 (3-qubit, p=50%): ✅ ПРОЙДЕН
  Gate errors: 2

ТЕСТ 2 (Shor, p=30%): ✅ ПРОЙДЕН
  Gate errors: 5

ТЕСТ 3 (Статистика, p=20%): ✅ ПРОЙДЕН
  Частота: 19.23%

═══════════════════════════════════════════════════════════════
🎉 ВСЕ ТЕСТЫ ПРОЙДЕНЫ! Gate Errors работают корректно!
═══════════════════════════════════════════════════════════════
```

---

## ⚠️ Возможные проблемы:

### Если gate errors = 0 во всех тестах:
- Проблема: `applyGateErrorIfNeeded` не вызывается
- Решение: Проверить, что изменения в `src/core/quantum/system.ts` сохранены

### Если частота ошибок = 0% в тесте 3:
- Проблема: Gate errors не применяются вообще
- Решение: Проверить конфигурацию `gateErrorConfig.enabled = true`

### Если частота ошибок сильно отличается (например, < 5% или > 30%):
- Причина: Статистические отклонения при малом количестве прогонов
- Это нормально: Увеличить количество прогонов до 50-100 для более точной статистики

---

## 📊 Пример успешного вывода:

```
🧪 ПРОСТОЙ ТЕСТ GATE ERRORS
══════════════════════════════════════════════════════════════════════

📝 ТЕСТ 1: Gate Errors с вероятностью 50%
──────────────────────────────────────────────────────────────────────
⚙️ Настройки:
  - Код: 3-кубитный (repetition)
  - Начальное состояние: |0⟩
  - Gate Errors: ВКЛЮЧЕНЫ
  - Вероятность: 50%
  - Тип ошибки: bit-flip (X)

📊 Результаты:
  Всего операций: 12
  Gate errors обнаружено: 2
  Обычных гейтов: 3

  Детали gate errors:
    1. X на q0 после гейта CNOT
    2. X на q1 после гейта CNOT

✅ ОЖИДАЕМЫЙ РЕЗУЛЬТАТ:
  - Должно быть несколько gate errors (примерно 1-3)
  - Тип ошибки: X
  - Gate errors применяются после CNOT гейтов
```

---

## 🚀 Готово к запуску!

Просто выполните команду:
```bash
npx tsx tests/simple-gate-error-test.ts
```

И сравните результаты с ожидаемыми выше.





